import{au as w,q as P,G as a,l as S,a4 as g,j as r,p as _}from"./DMNZWCky.js";const x=w("promocodesStore",()=>{const{t:d}=P(),n=a(!1),u=S(),f=g(),s=a(void 0),i=a(!1);function l(o){const t={...o};return f.isUserIndia&&(o.platform==="pubg"&&(t.platform="bgmi"),o._case&&o._case.platform==="pubg"&&(t._case={...o._case,platform:"bgmi"})),t}function m(o){return r().promoCodes.codesActivate({activatePromoCodeRequest:{code:o}})}const p=async o=>{try{s.value=void 0,i.value=!0;const t=await r().promoCodes.codesShow({activatePromoCodeRequest:{code:o}});t?s.value=l(t):s.value=void 0}finally{i.value=!1}};function v(){return r().promoCodes.codesDeactivate().then(t=>(u.getUser(),t))}async function y(o){const t=r();if(o){const c=_();if(!u.userIsAuthorized)c({type:"error",text:d("auth.errors.auth_needed")});else try{s.value=await t.promoCodes.codesShow({activatePromoCodeRequest:{code:o}})}catch(C){const e=await C.response.json();Array.isArray(e==null?void 0:e.code)&&(e!=null&&e.code.length)?c({type:"error",text:e.code[0]}):typeof(e==null?void 0:e.code)=="string"&&(e!=null&&e.code)?c({type:"error",text:e.code}):c({type:"error",text:d("promocode.failed_to_activate")})}}document.documentElement.style.overflow="hidden",n.value=!0}function h(){n.value=!1,document.documentElement.style.overflow=""}return{promocodeWindowIsRequired:n,activatePromocode:m,cancelPromocode:v,showPromocodePopup:y,hidePromocodeWindow:h,checkCode:p,isCodeChecking:i,promocodeData:s}});export{x as u};
//# sourceMappingURL=BCe49lIb.js.map
