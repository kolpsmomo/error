import{au as O,G as t,al as T,j as p,l as U}from"./DMNZWCky.js";const D=O("bossStore",()=>{const s=t(!1),e=t(void 0),i=T(null),o=t(!1),a=t(void 0),n=T(null),r=t(!1),c=t(0),l=t(0),m=t(0),d=t(0),f=t(void 0),b=t(!1),B=t(void 0),w=t("00"),g=t("00"),v=t("00"),P=t("00"),E=t(void 0),M=t([]),A=t(""),k=t(null),S=t(!1),H=t(!1),_=t(null),x=t(!1),y=t([]),I=t(0),$=t(""),L=t(null),R=t(void 0);return{blocked:s,connection:i,connectionIsLost:o,boss:n,bossIsAvailable:r,bossHealthPercent:c,bossHealthPoints:l,bossHealthTotal:m,bossEndDate:f,bossTotalDamage:d,timeIsUp:b,timerEndDate:B,timerDays:w,timerHours:g,timerMinutes:v,timerSeconds:P,timerTimer:E,attackOptions:M,lastAttackName:A,profile:k,showRewardPopup:S,showInfoPopup:H,rewardPopupData:_,reborn:x,reconnectionTimer:a,initMainViewTimer:e,participants:y,maxParticipants:I,nextParticipantsLink:$,currentUser:L,participantsTimer:R}});function V(s,e=void 0){const i=new Date(s),o=e?new Date(e):new Date,a=(i.getTime()-o.getTime())/1e3;if(a<0)return{d:"00",h:"00",m:"00",s:"00",expired:!0};{const n=Math.floor(a/86400),r=Math.floor((a-n*(24*60*60))/(60*60)),c=Math.floor((a-n*(24*60*60)-r*(60*60))/60),l=Math.floor(a-n*(24*60*60)-r*(60*60)-c*60),m=n<10?`0${n}`:`${n}`,d=r<10?`0${r}`:`${r}`,f=c<10?`0${c}`:`${c}`,b=l<10?`0${l}`:`${l}`;return{d:m,h:d,m:f,s:b,expired:!1}}}function u(){const s=D();if(s.timerEndDate===void 0)return;const{d:e,h:i,m:o,s:a,expired:n}=V(s.timerEndDate.toString());n?(clearTimeout(s.initMainViewTimer),s.blocked=!0,s.bossIsAvailable=!1,s.timerDays="00",s.timerHours="00",s.timerMinutes="00",s.timerSeconds="00",s.initMainViewTimer=setTimeout(()=>j(),Math.floor(Math.random()*1e4))):(s.timerDays=e,s.timerHours=i,s.timerMinutes=o,s.timerSeconds=a,s.timerTimer=setTimeout(()=>u(),1e3))}async function N(){const s=D(),e=p();try{s.profile=await e.events.bossBattleProfileRetrieve({slug:h})}catch{}}const h="megalodons",G="megalodon";async function j(){const s=p(),e=D(),i=U();let o=null;const a=3;for(let n=0;n<a;n+=1)try{if(o=await s.events.bossBattleRetrieve({slug:h}),o)break}catch{}if(o){if(e.profile=null,o.currentBoss){i.userIsAuthorized&&await N();for(let n=0;n<a;n+=1)try{if(e.attackOptions=await s.events.bossBattleAttackActionsList({slug:h}),e.attackOptions)break}catch{}e.bossEndDate=o.currentBoss.endDate,e.bossHealthPercent=o.currentBoss.healthPercentage,e.bossHealthPoints=o.currentBoss.healthPoints-o.currentBoss.damage,e.bossHealthTotal=o.currentBoss.healthPoints,e.bossTotalDamage=o.currentBoss.damage,new Date(o.currentBoss.startDate).getTime()>new Date().getTime()?(e.timerEndDate=o.currentBoss.startDate,e.reborn=!0,u()):new Date(o.currentBoss.endDate).getTime()>new Date().getTime()&&(e.blocked=o.currentBoss.healthPoints<=0,e.reborn=!1,e.bossIsAvailable=!0,e.timerEndDate=o.currentBoss.endDate,u())}o.nextBoss!==null&&o.currentBoss===null&&(e.reborn=!0,e.timerEndDate=o.nextBoss.startDate,u())}}export{G as B,N as a,h as b,u as c,j as i,D as u};
//# sourceMappingURL=B5UWTboY.js.map
